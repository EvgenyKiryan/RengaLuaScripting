Введение
========

`Renga <https://rengabim.com/>`_ расширяет свои внутренние возможности по созданию пользовательских шаблонов стилей инженерного оборудования благодаря пользовательским cкриптам, написанным на языке **Renga STDL**.

.. important:: Начиная с версии 2.0 возможности **Renga STDL** расширяются и для создания шаблонов стилей арматурных изделий!

**STDL** (**Style Template Description Language** , *язык описания шаблона стиля*) — предметно-ориентированный язык на основе Lua, который предоставляет средства для описания шаблонов стиля с использованием встроенных возможностей Lua (условия, циклы и т.д.), набора функций для взаимодействия с Renga **Style Template API** (создание и редактирование геометрии объекта с помощью пользовательских параметров, создание портов оборудования, управления отображением параметров в диалоге стиля).

Окружение
---------

Описание шаблона стиля оборудования и арматурного изделия состоит из нескольких файлов:

1. Файл описания параметров стиля в формате JSON.

Созданию параметров и использованию их в скриптах посвящена первая часть руководства :doc:`Параметризация <../createparams>`

2. Один или несколько файлов скриптов на языке Lua. В скриптах описываются функции, которые будут создавать различное отображения объекта в Renga (детальный, условный, символьный уровень детализации) на основе параметров стиля, управлять отображением параметров в стиле оборудования, а также размещать порты инженерному оборудованию и задавать им параметры.

Обзору функций для взаимодействия с Renga **Style Template API** посвящена вторая часть руководства :doc:`Обзор функций <../packages>`

.. note:: При написании скриптов рекомендуется руководствоваться специализированными справочниками, например, `Programming in Lua <http://www.lua.org/manual/5.4/>`_, а также официальной документацией по Renga STDL

.. 3. Файл ``graph_icon.svg`` — условное изображение категории оборудования во вкладке соответствующей системы (см. `Справку Renga <https://help.rengabim.com/ru/index.htm#MEP_design.htm>`_). Пример:|pic1| 

    .. |pic1| image:: _static/graph_icon.png
        :scale: 50%

Перед импортом в `Renga Professional <https://rengabim.com/>`_ подготовленные файлы должны быть собраны в один файл с расширением **RST** (**Renga Style Template**, *шаблон стиля Renga*). Сборка осуществляется с помощью утилиты **RstBuilder.exe**, которая входит в комплект разработчика `Renga STDL SDK <https://dl.rengabim.com/STDLSDK/RengaSTDLSDK.zip>`_.

.. important:: Подробно описано в главе `Сборка шаблона стиля <https://help.rengabim.com/stdl/ru/style_template_building.html>`_ справочного руководства Renga STDL.

Шаблон стиля Renga
------------------

Шаблоны стилей в Renga формируют:

.. tab-set::

    .. tab-item:: Категории инженерного оборудования

        * на основе которых можно создавать свои стили инженерного оборудования. Импорт новой категории оборудования в Renga осуществляется из меню "Управление стилями" — "Категории".

        .. image:: _static/Renga_categories.png
            :scale: 90 %
            :alt: Диалог "Категории"
            :align: center

    .. tab-item:: Шаблоны стилей арматурных изделий
        
        * на основе которых можно создавать арматурные стержни, сетки или каркасы по собственным правилам для применения в стилях армирования конструкций. Импорт нового шаблона стиля арматурного изделия в Renga осуществляется из меню "Управление стилями" — "Армирование" — "Шаблоны стилей арматурных изделий".

        .. image:: _static/Renga_rebars.png
            :scale: 90 %
            :alt: Диалог "Шаблоны стилей арматурных изделий"
            :align: center

В дальней работе проектировщик сможет самостоятельно создавать свои стили на основе импортированного шаблона.

.. tab-set::

    .. tab-item:: Стили инженерного оборудования

        .. image:: _static/Renga_new_style_from_category.png
            :scale: 90 %
            :alt: Диалог "Стили оборудования"
            :align: center

    .. tab-item:: Стили арматурных изделий
        
        .. image:: _static/Renga_new_style_from_rebars_template.png
            :scale: 90 %
            :alt: Диалог "Стили арматурных изделий"
            :align: center